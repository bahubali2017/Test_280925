ğŸ”§ STRICT AGENT PROMPT â€” FIX client/src/lib/llm-api.jsx
Objective

Eliminate all ESLint errors and warnings in llm-api.jsx.
No suppressions, no new scripts, no diversions â€” only targeted fixes.

Errors to Fix
ğŸ”´ Unused imports / functions / vars

Line 7: routeMedicalQuery â†’ unused

Line 9: setTimeout â†’ unused import

Line 933: e unused

Line 974: getCachedLayerResult â†’ unused

Line 991: setCachedLayerResult â†’ unused

Line 1113: handleStreamingRequest â†’ unused

Line 1495: retryApiRequest â†’ unused

Fix:

Remove if truly unused

If kept for future use â†’ prefix with _ (e.g. _retryApiRequest)

ğŸ”´ Undefined globals

Line 788: TextDecoder not defined

Line 1044: clearTimeout not defined

Line 1076: AbortSignal not defined

Line 1092: AbortSignal not defined

Line 1182: options not defined

Fix:

Add safe imports or global references:

/* global TextDecoder, AbortSignal, setTimeout, clearTimeout */


Or ensure these come from window in browser:

const decoder = new window.TextDecoder();


For options, define it properly in scope or remove if unused.

ğŸ”´ Empty block

Line 1377: Empty {} block

Fix:

Remove block if unused

Or add a comment placeholder:

{ 
  // TODO: Implementation will be added later
}

âš ï¸ Missing JSDoc

Line 1728: Missing @returns

Fix:
Add proper JSDoc annotation:

/**
 * Handles [functionName].
 * @param {object} params - function parameters
 * @returns {Promise<any>} - description of return value
 */

Instructions to Agent

Remove or rename all unused imports/vars

Do NOT leave â€œdefined but never usedâ€

If future-use â†’ prefix _

Fix undefined globals by:

Adding /* global ... */ header

OR safely referencing window.*

Fix empty block with removal or placeholder comment

Add missing JSDoc @returns at line 1728

Run ESLint again â†’ ensure 0 errors, 0 warnings

Acceptance Criteria

âœ… llm-api.jsx has no ESLint errors/warnings

âœ… No suppressions used (eslint-disable)

âœ… No duplicate logic created

âœ… App functionality unchanged

âœ… Codebase remains stable and production-safe