@tailwind base;
@tailwind components;
@tailwind utilities;

/* Smooth typing indicator animation */
.typing-indicator {
  display: inline-flex;
  align-items: center;
  height: 1.5em;
}

.typing-indicator .dot {
  display: inline-block;
  width: 0.4em;
  height: 0.4em;
  border-radius: 50%;
  margin: 0 0.1em;
  background-color: currentColor;
  opacity: 0.6;
  animation: typingAnimation 1.4s infinite ease-in-out;
}

.typing-indicator .dot:nth-child(1) {
  animation-delay: 0s;
}

.typing-indicator .dot:nth-child(2) {
  animation-delay: 0.2s;
}

.typing-indicator .dot:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes typingAnimation {
  0%, 100% {
    transform: translateY(0);
    opacity: 0.6;
  }
  50% {
    transform: translateY(-0.3em);
    opacity: 0.8;
  }
}

@keyframes neural-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 4px rgba(6, 182, 212, 0.4)) brightness(1.0);
    transform: scale(1);
  }
  50% {
    filter: drop-shadow(0 0 8px rgba(6, 182, 212, 0.8)) brightness(1.2);
    transform: scale(1.05);
  }
}

/* PWA Update Notification Animation */
@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

@layer base {
  :root {
    /* Neural Theme Colors - Updated Anamnesis Brand */
    --neural-cyan-primary: #06b6d4;
    --neural-cyan-light: #22d3ee;
    --neural-cyan-dark: #0891b2;
    --neural-blue: #3b82f6;
    --neural-indigo: #6366f1;
    --neural-purple: #8b5cf6;
    
    /* Effect Colors */
    --neural-glow: rgba(6, 182, 212, 0.6);
    --neural-glow-intense: rgba(6, 182, 212, 1);
    --neural-shadow: rgba(6, 182, 212, 0.3);
    --neural-ripple: rgba(159, 223, 255, 0.6);
    --neural-ripple-light: rgba(159, 223, 255, 0.4);
    
    /* Heart Colors */
    --heart-primary: #f472b6;
    --heart-glow: rgba(159, 223, 255, 0.4);
    
    /* Medical Colors */
    --medical-white: #ffffff;
    --medical-gray-light: #f8fafc;
    --medical-gray: #64748b;
    --medical-gray-dark: #334155;
    
    /* Legacy colors for backwards compatibility */
    --primary-rgb: 6, 182, 212; /* Updated to neural cyan */
    --secondary-rgb: 59, 130, 246; /* Neural blue */
    --accent-rgb: 34, 211, 238; /* Neural cyan light */
    --success-rgb: 16, 185, 129; /* #10B981 - Success green */
    --warning-rgb: 245, 158, 11; /* #F59E0B - Warning amber */
    --error-rgb: 239, 68, 68; /* #EF4444 - Error red */
    --info-rgb: 59, 130, 246; /* #3B82F6 - Info blue */
    
    /* Custom colors for message bubbles and suggestion chips - Neural theme */
    --user-message-bg-rgb: 6, 182, 212; /* Neural cyan primary for user messages */
    --user-message-text-rgb: 255, 255, 255; /* #FFFFFF - White text for user messages */
    --suggestion-bg-rgb: 224, 247, 255; /* Very light neural cyan for suggestion chips */
    --suggestion-text-rgb: 8, 145, 178; /* Neural cyan dark for suggestion chip text */
    
    /* Light mode CSS variables */
    --background: 0 0% 100%; /* white */
    --foreground: 222 47% 11%; /* dark blue-gray for text */
    --card: 0 0% 100%; /* white */
    --card-foreground: 222 47% 11%; /* dark blue-gray */
    --popover: 0 0% 100%; /* white */
    --popover-foreground: 222 47% 11%; /* dark blue-gray */
    
    /* Neural Cyan primary colors - new branding */
    --primary: 188 94% 43%; /* Neural cyan primary */
    --primary-foreground: 0 0% 100%; /* #FFFFFF - Pure white for maximum contrast */
    
    /* Secondary colors based on Neural theme */
    --secondary: 186 85% 93%; /* Neural cyan light */
    --secondary-foreground: 191 91% 36%; /* Neural cyan dark */
    
    /* Style system supporting colors */
    --muted: 186 32% 91%; /* light neural cyan */
    --muted-foreground: 186 32% 45%; /* medium neural cyan */
    --accent: 186 85% 93%; /* light neural cyan */
    --accent-foreground: 191 91% 36%; /* neural cyan dark */
    
    /* Semantic colors */
    --destructive: 0 84% 60%; /* bright red */
    --destructive-foreground: 210 40% 98%; /* off-white */
    --success: 142 76% 36%; /* emerald green */
    --success-foreground: 210 40% 98%; /* off-white */
    --warning: 38 92% 50%; /* amber */
    --warning-foreground: 222 47% 11%; /* dark blue-gray */
    --info: 214 100% 60%; /* info blue */
    --info-foreground: 210 40% 98%; /* off-white */
    
    /* UI Elements */
    --border: 186 32% 91%; /* light neural cyan */
    --input: 186 32% 91%; /* light neural cyan */
    --ring: 191 91% 36%; /* neural cyan dark */
    --radius: 0.5rem; /* border radius */
    
    /* Sidebar specific colors */
    --sidebar-background: 186 85% 97%; /* very light neural cyan */
    --sidebar-foreground: 222 47% 11%; /* dark blue-gray */
    --sidebar-primary: 191 91% 36%; /* neural cyan dark */
    --sidebar-primary-foreground: 210 40% 98%; /* off-white */
    --sidebar-accent: 186 85% 92%; /* light neural cyan */
    --sidebar-accent-foreground: 191 91% 36%; /* neural cyan dark */
    --sidebar-border: 186 60% 85%; /* medium light neural cyan */
    --sidebar-ring: 191 91% 36%; /* neural cyan dark */
    
    /* Chart colors - Updated to neural theme */
    --chart-1: 188 94% 43%; /* neural cyan */
    --chart-2: 217 91% 60%; /* neural blue */
    --chart-3: 238 84% 67%; /* neural indigo */
    --chart-4: 256 87% 66%; /* neural purple */
    --chart-5: 191 91% 36%; /* neural cyan dark */
  }

  .dark {
    /* Dark mode variables - Enhanced with neural theme */
    --background: 222 47% 8%; /* deeper dark blue-gray for better neural contrast */
    --foreground: 210 40% 98%; /* off-white */
    --card: 222 47% 10%; /* slightly lighter than background */
    --card-foreground: 210 40% 98%; /* off-white */
    --popover: 222 47% 10%; /* matches card */
    --popover-foreground: 210 40% 98%; /* off-white */
    
    /* Dark mode custom message bubble variables - Enhanced neural theme */
    --user-message-bg-rgb: 6, 182, 212; /* #06b6d4 - Neural cyan for dark mode */
    --user-message-text-rgb: 255, 255, 255; /* #FFFFFF - White text for user messages */
    --suggestion-bg-rgb: 6, 182, 212; /* #06b6d4 - Neural cyan for suggestions */
    --suggestion-text-rgb: 255, 255, 255; /* #FFFFFF - White text for dark mode suggestions */
    
    /* Adjusted primary for better visibility in dark mode - Neural theme */
    --primary: 186 85% 58%; /* even brighter neural cyan for dark mode */
    --primary-foreground: 222 47% 8%; /* matches background */
    
    /* Dark mode secondary colors - Enhanced neural theme */
    --secondary: 217 33% 15%; /* deeper dark blue-gray */
    --secondary-foreground: 210 40% 98%; /* off-white */
    
    /* Dark mode supporting colors - Enhanced neural theme */
    --muted: 217 33% 15%; /* matches secondary */
    --muted-foreground: 215 20% 70%; /* slightly brighter gray for better readability */
    --accent: 186 85% 20%; /* neural cyan accent in dark mode */
    --accent-foreground: 210 40% 98%; /* off-white */
    
    /* Dark mode semantic colors */
    --destructive: 0 62% 30%; /* darker red */
    --destructive-foreground: 210 40% 98%; /* off-white */
    --success: 142 64% 26%; /* darker green */
    --success-foreground: 210 40% 98%; /* off-white */
    --warning: 38 92% 36%; /* darker amber */
    --warning-foreground: 210 40% 98%; /* off-white */
    --info: 214 100% 43%; /* darker info blue */
    --info-foreground: 210 40% 98%; /* off-white */
    
    /* Dark mode UI elements - Enhanced neural theme */
    --border: 217 33% 18%; /* slightly lighter border for definition */
    --input: 217 33% 15%; /* matches secondary */
    --ring: 186 85% 58%; /* neural cyan ring */
    
    /* Dark mode sidebar - Enhanced neural theme */
    --sidebar-background: 222 47% 7%; /* even deeper background for neural contrast */
    --sidebar-foreground: 210 40% 98%; /* off-white */
    --sidebar-primary: 186 85% 58%; /* neural cyan primary */
    --sidebar-primary-foreground: 222 47% 8%; /* matches main background */
    --sidebar-accent: 186 85% 20%; /* neural cyan accent */
    --sidebar-accent-foreground: 210 40% 98%; /* off-white */
    --sidebar-border: 215 28% 18%; /* slightly lighter border */
    --sidebar-ring: 186 85% 58%; /* neural cyan ring */
  }

  /* Base styles */
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground transition-colors duration-300;
    -webkit-tap-highlight-color: transparent;
  }

  html {
    @apply overflow-x-hidden scroll-smooth;
  }

  /* Improved focus styles for accessibility */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary ring-2 ring-primary/20 ring-offset-1;
  }

  /* Headings */
  h1, h2, h3, h4, h5, h6 {
    @apply font-medium text-foreground;
  }

  /* Links */
  a {
    @apply text-primary hover:text-primary/80 transition-colors duration-200;
  }

  /* Selection styling */
  ::selection {
    @apply bg-primary/20 text-foreground;
  }
}

/* Neural Logo Animations */
.animated-neural-logo {
  filter: drop-shadow(0 0 10px rgba(159, 223, 255, 0.5));
  position: relative;
}

.animated-neural-logo:hover {
  animation-duration: 2s;
}

.animated-neural-logo:hover > div {
  animation-duration: 2s;
}

.neural-brain-logo {
  animation: gentleHeartbeat 3s ease-in-out infinite;
  transform-origin: center;
}

/* Gentle Heartbeat Rhythm Animation */
@keyframes gentleHeartbeat {
  0% {
    transform: scale(1);
    filter: brightness(1) drop-shadow(0 0 8px rgba(159, 223, 255, 0.5));
  }
  20% {
    transform: scale(1.04);
    filter: brightness(1.05) drop-shadow(0 0 10px rgba(159, 223, 255, 0.6));
  }
  30% {
    transform: scale(1);
    filter: brightness(1) drop-shadow(0 0 8px rgba(159, 223, 255, 0.5));
  }
  40% {
    transform: scale(1.06);
    filter: brightness(1.08) drop-shadow(0 0 12px rgba(159, 223, 255, 0.7));
  }
  60% {
    transform: scale(1);
    filter: brightness(1) drop-shadow(0 0 8px rgba(159, 223, 255, 0.5));
  }
  100% {
    transform: scale(1);
    filter: brightness(1) drop-shadow(0 0 8px rgba(159, 223, 255, 0.5));
  }
}

/* Primary Continuous Water Ripples Animation */
@keyframes continuousRipples {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.8;
    border-width: 2px;
  }
  25% {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 0.6;
    border-width: 1.5px;
  }
  50% {
    transform: translate(-50%, -50%) scale(2.2);
    opacity: 0.4;
    border-width: 1px;
  }
  75% {
    transform: translate(-50%, -50%) scale(3.0);
    opacity: 0.2;
    border-width: 0.5px;
  }
  100% {
    transform: translate(-50%, -50%) scale(4.2);
    opacity: 0;
    border-width: 0px;
  }
}

/* Secondary Ripple Layer Animation */
@keyframes rippleLayer1 {
  0% {
    transform: translate(-50%, -50%) scale(0.9);
    opacity: 0;
  }
  10% {
    opacity: 0.7;
  }
  100% {
    transform: translate(-50%, -50%) scale(4.5);
    opacity: 0;
  }
}

/* Tertiary Ripple Layer Animation */
@keyframes rippleLayer2 {
  0% {
    transform: translate(-50%, -50%) scale(0.8);
    opacity: 0;
  }
  15% {
    opacity: 0.5;
  }
  100% {
    transform: translate(-50%, -50%) scale(5.0);
    opacity: 0;
  }
}

/* Neural Gradient Utilities */
.gradient-main-brand {
  background: linear-gradient(135deg, var(--neural-cyan-primary), var(--neural-blue));
}

.gradient-enhanced {
  background: linear-gradient(135deg, var(--neural-cyan-light), var(--neural-indigo));
}

.gradient-subtle-neural {
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(59, 130, 246, 0.1));
}

.gradient-header-neural {
  background: linear-gradient(135deg, var(--neural-cyan-primary), var(--neural-purple));
}

/* Neural gradient for text effects */
.bg-neural-gradient-primary {
  background: linear-gradient(135deg, rgb(6, 182, 212), rgb(59, 130, 246), rgb(99, 102, 241));
}

/* Neural gradient for user message bubbles */
.bg-neural-user-message {
  background: linear-gradient(135deg, rgb(6, 182, 212), rgb(59, 130, 246));
  box-shadow: 0 4px 15px rgba(6, 182, 212, 0.25);
}

/* Text gradient utilities */
.bg-clip-text {
  -webkit-background-clip: text;
  background-clip: text;
}

.text-transparent {
  color: transparent;
}

@layer components {
  .container-sm {
    @apply w-full px-4 mx-auto max-w-md;
  }
}

/* Tab Switcher Styling - Neural Theme */
.auth-tab-switcher {
  display: flex;
  border-radius: 0.5rem;
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(59, 130, 246, 0.1));
  border: 1px solid rgba(6, 182, 212, 0.2);
  padding: 0.25rem;
  margin-bottom: 1rem;
}

.auth-tab-button {
  flex: 1;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  border-radius: 0.375rem;
  transition: all 0.15s ease-in-out;
  border: none;
  cursor: pointer;
  outline: none;
  font-family: inherit;
}

.auth-tab-button.active {
  background: linear-gradient(135deg, #06b6d4, #3b82f6);
  color: #ffffff;
  box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
  transform: translateY(-1px);
}

.auth-tab-button.inactive {
  background-color: transparent;
  color: #06b6d4;
  border: 1px solid rgba(6, 182, 212, 0.3);
}

.auth-tab-button.inactive:hover {
  color: #ffffff;
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.8), rgba(59, 130, 246, 0.8));
  border-color: rgba(6, 182, 212, 0.6);
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(6, 182, 212, 0.2);
}

.auth-tab-button:focus {
  outline: 2px solid #06b6d4;
  outline-offset: 2px;
}

/* Dark mode tab styling */
.dark .auth-tab-switcher {
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(59, 130, 246, 0.15));
  border-color: rgba(6, 182, 212, 0.3);
}

.dark .auth-tab-button.active {
  background: linear-gradient(135deg, #06b6d4, #3b82f6);
  color: #ffffff;
  box-shadow: 0 4px 15px rgba(6, 182, 212, 0.4);
}

.dark .auth-tab-button.inactive {
  color: #22d3ee;
  border-color: rgba(34, 211, 238, 0.4);
}

.dark .auth-tab-button.inactive:hover {
  color: #ffffff;
  background: linear-gradient(135deg, rgba(34, 211, 238, 0.8), rgba(99, 102, 241, 0.8));
  border-color: rgba(34, 211, 238, 0.6);
}

/* Neural Button Styling */
.neural-button {
  background: linear-gradient(135deg, #06b6d4, #3b82f6);
  border: 1px solid #22d3ee;
  box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
  color: white;
  font-weight: 600;
  border-radius: 0.375rem;
  padding: 0.75rem 1rem;
  transition: all 0.3s ease;
  width: 100%;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.neural-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.neural-button:hover::before {
  left: 100%;
}

.neural-button:hover {
  background: linear-gradient(135deg, #22d3ee, #6366f1);
  box-shadow: 0 6px 20px rgba(6, 182, 212, 0.6);
  transform: translateY(-2px);
}

.neural-button:focus {
  outline: 2px solid #06b6d4;
  outline-offset: 2px;
}

.neural-button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none;
}

.neural-button:disabled::before {
  display: none;
}

@layer components {
  .container-md {
    @apply w-full px-4 mx-auto max-w-3xl md:px-6;
  }

  .container-lg {
    @apply w-full px-4 mx-auto max-w-5xl md:px-6 lg:px-8;
  }

  .container-xl {
    @apply w-full px-4 mx-auto max-w-7xl md:px-6 lg:px-8;
  }

  .form-input-lg {
    @apply h-12 text-base px-4;
  }

  .btn-touch {
    @apply min-h-[44px] px-4;
  }

  .touch-py {
    @apply py-3 md:py-2;
  }

  .touch-px {
    @apply px-3 md:px-4;
  }

  .h1 {
    @apply text-2xl font-bold md:text-3xl lg:text-4xl;
  }

  .h2 {
    @apply text-xl font-bold md:text-2xl lg:text-3xl;
  }

  .h3 {
    @apply text-lg font-bold md:text-xl lg:text-2xl;
  }

  .text-body {
    @apply text-sm md:text-base;
  }

  .text-small {
    @apply text-xs md:text-sm;
  }
}

@layer utilities {
  .h-safe-bottom {
    height: env(safe-area-inset-bottom, 0px);
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top, 0px);
  }

  .touch-target {
    @apply min-h-[44px] min-w-[44px];
  }

  .tour-highlight {
    @apply relative z-10;
  }

  .tour-highlight::after {
    content: '';
    @apply absolute inset-0 rounded-lg border-2 border-primary animate-pulse shadow-lg z-10 pointer-events-none;
    box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.2);
  }

  .pulse-animation {
    animation: emergency-pulse 2s infinite;
    transform-origin: center;
  }

  @keyframes emergency-pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7);
    }
    70% {
      box-shadow: 0 0 0 10px rgba(220, 38, 38, 0);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
    }
  }
  
  .typing-indicator {
    @apply flex items-center;
  }

  .typing-indicator span {
    @apply h-2 w-2 bg-muted-foreground rounded-full inline-block mx-0.5 opacity-60;
  }

  .typing-indicator span:nth-child(1) {
    animation: typing 1.4s infinite;
    animation-delay: 0s;
  }

  .typing-indicator span:nth-child(2) {
    animation: typing 1.4s infinite;
    animation-delay: 0.2s;
  }

  .typing-indicator span:nth-child(3) {
    animation: typing 1.4s infinite;
    animation-delay: 0.4s;
  }

  @keyframes typing {
    0% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-5px);
    }
    100% {
      transform: translateY(0px);
    }
  }
}
