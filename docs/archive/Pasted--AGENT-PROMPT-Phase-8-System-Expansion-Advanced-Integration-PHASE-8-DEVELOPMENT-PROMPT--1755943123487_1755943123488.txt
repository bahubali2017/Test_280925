âœ… AGENT PROMPT â€” Phase 8: System Expansion & Advanced Integration
# ğŸ“˜ PHASE 8 DEVELOPMENT PROMPT â€” SYSTEM EXPANSION & ADVANCED INTEGRATION

## GOAL
Begin Phase 8 of the Anamnesis Medical AI Layer development. This phase focuses on extending the AI assistantâ€™s medical intelligence, enhancing regional/cultural adaptability, supporting alternative LLMs, and improving performance. All new features must preserve the platformâ€™s:
- âœ… HIPAA compliance
- âœ… 100% clinical test success rate
- âœ… 0 TypeScript/ESLint errors
- âœ… Real-time capability
- âœ… JSDoc and audit documentation

---

## âœ… TASK 1: Medical Domain Expansion

### ğŸ”¹ 1.1 Add specialized condition templates:
- Autoimmune conditions (e.g., lupus, MS, RA)
- Neurological symptoms (e.g., seizures, vertigo, neuralgia)
- Pediatric-specific logic (age-aware triage, growth symptom handling)
- Geriatric adaptations (multi-comorbidity handling, frailty assessment)

### ğŸ”¹ 1.2 Create follow-up suggestion templates:
- Tailor suggestions based on condition type and triage level
- Add prompt enhancements and UI component placeholders

---

## âœ… TASK 2: Regional & Demographic Adaptation

### ğŸ”¹ 2.1 Create localization hooks:
- Region-specific medical disclaimers (e.g., EU vs. US)
- Terminology localization infrastructure (e.g., â€œparacetamolâ€ vs. â€œacetaminophenâ€)

### ğŸ”¹ 2.2 Build demographic-aware calibrations:
- Logic modifiers based on user age, sex, region
- Cultural symptom phrasing variations support (e.g., "wind in belly" â†’ bloating)

---

## âœ… TASK 3: Advanced LLM Integration

### ğŸ”¹ 3.1 Test multiple model compatibility:
- Implement abstraction layer for MedPalm v2, Claude 3, and GPT-4
- Perform prompt optimization and token budgeting per model

### ğŸ”¹ 3.2 Create LLM fallback & preference logic:
- Auto-select optimal model for context (e.g., Claude for ethical sensitivity)
- Ensure full compatibility with existing `llm-api.jsx` logic

---

## âœ… TASK 4: System Optimization

### ğŸ”¹ 4.1 Performance tuning:
- Track and minimize added latency from Phase 8 features
- Cache symptom classification + triage output for known conditions

### ğŸ”¹ 4.2 Analytics & Learning Loops:
- Log success/failure rates of new templates
- Start collecting anonymous usage patterns for feedback integration

---

## ğŸ”’ REQUIREMENTS

- Maintain 100% passing status on `docs/LAYER_TEST_PLAN.md`
- Validate new logic via new test cases in `client/tests/qa/`
- Log all architecture and logic changes in:
  - ğŸ“„ `docs/AI-Layer-Capability-Report.md` (append Section 8)
  - ğŸ§ª `docs/LAYER_TEST_PLAN.md` (expand test table)
- NO `any` types, NO ESLint errors, NO suppressions allowed
- All new modules/functions must have complete JSDoc annotations
- Add entries in `CHANGELOG.md` under Phase 8 heading

---

## ğŸ” OUTPUT

When finished, respond with:

- âœ… Summary of new domain templates implemented
- âœ… Region/disclaimer/localization capabilities added
- âœ… LLM model compatibility matrix and routing strategy
- âœ… Performance benchmarks before and after optimization
- âœ… Location of updated docs (e.g., `docs/AI-Layer-Capability-Report.md`)
- âœ… Confirmation of 100% test pass and zero code quality errors